# MySQL 中 MyISAM 和 InnoDB 的区别

MyISAM 和 InnoDB 是 MySQL 最常用的两种存储引擎，它们在功能、性能和适用场景上有显著差异。以下是主要区别：

## 1. 事务支持
- **InnoDB**：支持事务（ACID 特性），具有提交(commit)、回滚(rollback)和崩溃恢复能力
- **MyISAM**：不支持事务，强调性能而非数据完整性

## 2. 锁机制
- **InnoDB**：支持行级锁和表级锁（默认行锁），适合高并发写操作
- **MyISAM**：仅支持表级锁，读性能高但写并发差

## 3. 外键约束
- **InnoDB**：支持外键约束
- **MyISAM**：不支持外键

## 4. 崩溃恢复
- **InnoDB**：有崩溃后安全恢复的能力（通过事务日志）
- **MyISAM**：崩溃后数据易损坏，恢复困难

## 5. 存储结构
- **InnoDB**：
  - 所有表存储在同一个表空间（ibdata文件）或每表独立文件(.ibd)
  - 采用聚簇索引（主键索引的叶节点包含完整数据记录）

- **MyISAM**：
  - 每个表存储为三个文件：.frm(表结构)、.MYD(数据)、.MYI(索引)
  - 使用非聚簇索引（索引和数据分离）

## 6. 性能特点
- **InnoDB**：
  - 写操作性能更好（特别是并发写）
  - 适合频繁更新、删除操作
  - 需要更多内存（缓冲池）

- **MyISAM**：
  - 读操作性能更高
  - 适合读密集型应用（如数据仓库）
  - 占用内存较少

## 7. 其他特性
| 特性                | InnoDB       | MyISAM       |
|---------------------|-------------|-------------|
| 全文索引            | MySQL 5.6+支持 | 支持         |
| 地理空间数据类型    | 支持          | 支持         |
| 压缩表              | 支持          | 支持（只读） |
| 计数统计            | 需要实时统计   | 有单独计数器 |
| 缓存                | 缓冲池        | 键缓存       |

## 8. 使用场景建议

**选择 InnoDB 当**：
- 需要事务支持（如银行系统）
- 有大量并发写操作
- 需要外键约束
- 数据安全性要求高

**选择 MyISAM 当**：
- 读密集型应用（如博客、CMS）
- 不需要事务支持
- 对读性能要求极高
- 有限的硬件资源

> **注意**：从 MySQL 5.5 开始，InnoDB 已成为默认存储引擎。除非有特殊需求，现代应用通常推荐使用 InnoDB。
